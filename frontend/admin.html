sed -i '/<button onclick="search()">Buscar<\/button>/a \
    <button onclick="syncPull()" style="margin-left:24px;">Sync ← Drive</button>\
    <button onclick="syncPush()">Sync → Drive</button>\
    <span id="syncStatus" style="margin-left:12px;color:#333"></span>' frontend/admin.html

cat >> frontend/admin.html << 'EOF'
<script>
async function syncPull(){
  document.getElementById('syncStatus').innerText = 'Iniciando pull...';
  try {
    const r = await fetch('/api/sync/pull', { method: 'POST' });
    document.getElementById('syncStatus').innerText = 'Pull en proceso... recarga luego';
    setTimeout(load, 3000);
  } catch (err) {
    document.getElementById('syncStatus').innerText = 'ERROR: ' + err.toString();
  }
}

async function syncPush(){
  document.getElementById('syncStatus').innerText = 'Iniciando push...';
  try {
    const r = await fetch('/api/sync/push', { method: 'POST' });
    document.getElementById('syncStatus').innerText = 'Push enviado';
  } catch (err) {
    document.getElementById('syncStatus').innerText = 'ERROR: ' + err.toString();
  }
}
</script>
EOF
